<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/emojionearea/3.4.2/emojionearea.min.css"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;700&display=swap");
      @import url("https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap");
      * {
        box-sizing: border-box;
        margin: 0;
      }
      body,
      html {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        height: 100%;
      }
      svg {
        cursor: pointer;
      }

      .navigation {
        width: 100%;
        min-height: 60px;
        background-color: white;
        position: sticky;
        top: 0;
        z-index: 1;
        border: 0.5px solid #76767637;
      }

      .case {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .container {
        display: flex;
        width: 900px;
        height: 90%;
        background-color: #ffffff;
        border: 0.5px solid #76767637;
      }

      img {
        user-select: none;
        -moz-user-select: none;
        -webkit-user-select: none;
      }

      .left {
        min-width: 350px;
        max-width: 350px;
        height: 100%;
        display: flex;
        flex-direction: column;
        overflow-x: hidden;
      }

      .left > .top {
        position: relative;
        min-height: 60px;
        width: 100%;
        background-color: #ffffff;
        border-bottom: 0.5px solid #76767637;
        display: flex;
        align-items: center;
      }

      .left > .top > .tub {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 15px;
        font-family: "Open Sans";
        width: 100%;
      }
      .left > .top > .tub > .username {
        max-width: 50%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .left > .top > .tub > .username > .down-arrow {
        cursor: pointer;
      }

      .left > .top > .card {
        position: absolute;
        padding: 0 10px;
        right: 10px;
      }
      .left > .top > .card > button {
        background-color: #ffffff;
        border: 0.5px solid #76767637;
        padding: 4px 8px;
        color: #323232;
        font-family: "Open Sans";
        font-weight: 700;
        font-size: 12px;
        border-radius: 12px;
        cursor: pointer;
      }
      .left > .top > .card > button:hover {
        color: #767676;
      }

      .left > .conversations {
        overflow-y: scroll;
        height: 100%;
        padding: 10px 0 0 0;
        overflow-x: hidden;
      }

      .conversations > .person {
        display: flex;
        align-items: center;
        padding: 10px;
        background-color: #ffffff;
        gap: 10px;
      }

      .conversations > .person:hover {
        background-color: #f0f0f0af;
        cursor: pointer;
      }

      .conversations > .person > .information {
        font-family: "Open Sans";
        font-size: 14px;
        display: flex;
        flex-direction: column;
        gap: 4px;
        width: 100%;
        overflow: hidden;
        user-select: none;
        -moz-user-select: none;
        -webkit-user-select: none;
      }

      .conversations > .person > .information > .username {
        font-family: "Open Sans";
        font-size: 14px;
        display: flex;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        gap: 4px;
        width: 100%;
        align-items: center;
      }

      .conversations > .person > .information > .content {
        display: flex;
        align-items: center;
        gap: 5px;
        width: 100%;
        color: black;
      }

      .conversations > .person > .information > .content > .message {
        max-width: 70%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-family: "Roboto";
        color: #000000;
      }

      .conversations > .person > .information > .content > .new {
        max-width: 70%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-family: "Roboto";
        color: black;
        font-weight: 700;
      }

      .conversations > .person > .box {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .conversations > .person > .box > .image {
        width: clamp(50px, 50px, 50px);
        height: clamp(50px, 50px, 50px);
        border-radius: 100%;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .conversations > .person > .box > .online {
        min-width: 1.1rem;
        min-height: 1.1rem;
        background-color: lawngreen;
        border-radius: 100%;
        position: absolute;
        border: 3px solid white;
        right: 0;
        bottom: 0;
      }

      .conversations > .person > .status {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 1rem;
      }

      .conversations > .person > .status > .point {
        min-height: 8px;
        min-width: 8px;
        background-color: #0084ff;
        border-radius: 100%;
      }

      .right {
        border-left: 0.5px solid #76767637;
        width: inherit;
        height: 94%;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .right > .top {
        width: 100%;
        display: flex;
        min-height: 60px;
        background-color: #363535;
        align-items: center;
        padding: 0 20px;
        border-bottom: 0.5px solid #76767637;
        gap: 1rem;
      }

      .right > .top > .box {
        position: relative;
        min-width: 30px;
        min-height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .right > .top > .box > .image {
        display: flex;
        align-items: center;
        border: none;
        border-radius: 100%;
        overflow: hidden;
      }

      .right > .top > .box > .online {
        position: absolute;
        min-width: 12px;
        min-height: 12px;
        background-color: lawngreen;
        border-radius: 100%;
        border: 2px solid #ffffff;
        right: 0;
        bottom: 0;
      }

      .right > .top > .information {
        display: flex;
        align-items: flex-start;
        justify-content: start;
        flex-direction: column;
        width: 100%;
        overflow: hidden;
        gap: 0;
        text-overflow: ellipsis;
      }

      .right > .top > .information > .username,
      .name {
        width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        font-size: 14px;
        font-family: "Open Sans";
      }
      .right > .top .information > .username {
        font-weight: 400;
        font-size: 15px;
        display: flex;
      }
      .blue-tick {
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
        -moz-user-select: none;
        -webkit-user-select: none;
        cursor: default;
      }

      .right > .top > .information > .username > a {
        color: white;
        text-decoration: none;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        gap: 2.5px;
      }

      .right > .top .information > .name {
        font-weight: 400;
        font-size: 12px;
        color: #bfb8b8;
      }

      .right > .top > .options {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .right > .top > .options > .info {
        border: none;
        background-color: transparent;
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
      }

      .right > .middle {
        background-color: #191919;
        height: inherit;
        display: flex;
        flex-direction: column-reverse;
        overflow-y: auto;
      }

      .messages {
        display: flex;
        flex-direction: column;
        padding: 10px;
        gap: 2.5px;
      }

      .clip {
        display: flex;
      }

      .clip > .text {
        font-family: "Open Sans";
        font-size: 14px;
        font-weight: 400;
        max-width: 50%;
        padding: 8px 16px;
        border-radius: 20px;
        word-break: keep-all;
        white-space: pre-wrap;
        word-wrap: break-word;
      }

      .received > .text {
        background-color: white;
        border: 0.5px solid #80808080;
      }

      .sent > .text {
        background-color: #0084ff;
        color: white;
      }

      .sent {
        flex-direction: row-reverse;
      }

      .seen {
        text-align: right;
        padding: 0 10px;
        font-family: "Open Sans";
        font-size: 0.75rem;
        font-weight: 400;
        color: gray;
      }

      .right > .bottom {
        height: auto;
        width: 100%;
        background-color: #2f2e2e;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 14px;
      }

      .cup {
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #ffffff;
        border: 0.5px solid #7676765c;
        width: 100%;
        gap: 10px;
        padding: 2px 15px;
        border-radius: 40px;
        overflow: hidden;
      }

      .cup > .picker {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        width: clamp(35px, 35px, 35px);
        height: clamp(35px, 35px, 35px);
        user-select: none;
      }

      .cup > textarea {
        font-family: "Open Sans";
        font-size: 0.85rem;
        font-weight: 400;
        border: none;
        outline: none;
        padding: 0 5px;
        width: 100%;
        resize: none;
        max-height: 100px;
      }

      .cup > .send {
        border: none;
        padding: 5px 10px;
        background-color: transparent;
        font-family: "Open Sans";
        font-size: 14px;
        font-weight: 700;
        color: #0084ff;
      }

      .send:disabled {
        color: #0084ff8d;
      }

      @media only screen and (max-width: 950px) {
        .container {
          border-top: none;
          width: 100%;
          height: 100%;
        }
      }
    </style>
    <script>
      $(document).ready(() => {
        const textarea = $("#message");
        const send = $(".send");
        const photo = $(".photo");

        $("body").on("contextmenu", ".blue-tick", function (e) {
          return false;
        });

        photo.show();
        send.hide();

        textarea
          .on("input keydown keyup", function () {
            textarea.height(0).height(this.scrollHeight);
            if (textarea.val().trim().length > 0) {
              send.show();
              photo.hide();
            } else {
              send.hide();
              photo.show();
            }
          })
          .find(textarea)
          .change();

        $(".person").click(() => {
          textarea.focus();
        });

        // function add() {
        //   var message = textarea.val().trim();
        //   $(".messages").append(
        //     "<div class='clip sent'><div class='text'>" +
        //       message +
        //       "</div></div>"
        //   );
        //   $(".content").html(
        //     "<div class='message'> <b>You :</b> " + message + "</div>"
        //   );
        //   textarea.val("");
        //   send.hide();
        //   photo.show();

        //   textarea.focus();
        //   textarea.height("");
        //   console.log("asdkladlnasdlknslf");
        //   document.getElementById("message").value = "";
        // }

        // send.click(() => {
        //   add();
        // });

        textarea.on("keydown", (event) => {
          if (event.keyCode == 13 && !event.shiftKey) {
            if (textarea.val().trim().length > 0) {
              send.removeAttr("disabled");
              // add();
            }
            event.preventDefault();
          }
        });
      });
    </script>
  </head>
  <body>
    <% include ./partials/header.ejs %>
    <div class="case">
      <div class="container">
        <div class="right">
          <div class="top">
            <div class="box">
              <div class="image">
                <img
                  src="https://cdn2.bigcommerce.com/server5400/3po1k2/products/8171/images/14559/161_light_blue__46032.1418747956.1280.1280.jpg?c=2g"
                  width="30px"
                  height="30px"
                  alt=""
                />
              </div>
              <div class="online"></div>
            </div>

            <div class="information">
              <div class="username">
                <a href="#"
                  >john
                  <svg
                    width="20px"
                    height="20px"
                    version="1.1"
                    id="Layer_1"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    x="0px"
                    y="0px"
                    viewBox="0 0 100 100"
                    style="enable-background: new 0 0 100 100"
                    xml:space="preserve"
                  >
                    <style type="text/css">
                      .st0 {
                        fill: #0084ff;
                      }

                      .st1 {
                        fill: none;
                        stroke: #0084ff;
                        stroke-miterlimit: 10;
                      }

                      .st2 {
                        fill: #ffffff;
                        stroke: #ffffff;
                        stroke-width: 0.25;
                        stroke-miterlimit: 10;
                      }
                    </style>
                    <g>
                      <path
                        class="st0"
                        d="M81.2,50c0,1.8-2.5,3.3-2.8,5c-0.3,1.7,1.5,4,1,5.7c-0.6,1.7-3.5,2.2-4.4,3.7c-0.9,1.5,0.1,4.3-1,5.7
                c-1.1,1.3-4.1,0.9-5.4,2c-1.3,1.1-1.4,4.1-2.9,5c-1.5,0.9-4.1-0.6-5.7,0c-1.6,0.6-2.7,3.4-4.4,3.7c-1.7,0.3-3.6-1.9-5.4-1.9
                c-1.8,0-3.7,2.2-5.4,1.9c-1.7-0.3-2.8-3.1-4.4-3.7c-1.7-0.6-4.2,0.8-5.8,0c-1.5-0.9-1.6-3.8-2.9-5c-1.3-1.1-4.3-0.7-5.4-2
                c-1.1-1.3-0.2-4.1-1-5.7c-0.9-1.5-3.8-2.1-4.4-3.7c-0.6-1.6,1.3-3.9,1-5.7c-0.3-1.7-2.8-3.2-2.8-5c0-1.8,2.5-3.3,2.8-5
                c0.3-1.7-1.5-4-1-5.7c0.6-1.7,3.5-2.2,4.4-3.7c0.9-1.5-0.1-4.3,1-5.7c1.1-1.3,4.1-0.9,5.4-2c1.3-1.1,1.4-4.1,2.9-5
                c1.5-0.9,4.1,0.6,5.7,0c1.6-0.6,2.7-3.4,4.4-3.7c1.7-0.3,3.6,1.9,5.4,1.9c1.8,0,3.7-2.2,5.4-1.9c1.7,0.3,2.8,3.1,4.4,3.7
                c1.7,0.6,4.2-0.8,5.8,0c1.5,0.9,1.6,3.8,2.9,5c1.3,1.1,4.3,0.7,5.4,2c1.1,1.3,0.2,4.1,1,5.7c0.9,1.5,3.8,2.1,4.4,3.7
                c0.6,1.6-1.3,3.9-1,5.7C78.7,46.7,81.2,48.2,81.2,50z"
                      />
                      <path
                        class="st1"
                        d="M81.2,50c0,1.8-2.5,3.3-2.8,5c-0.3,1.7,1.5,4,1,5.7c-0.6,1.7-3.5,2.2-4.4,3.7c-0.9,1.5,0.1,4.3-1,5.7
                c-1.1,1.3-4.1,0.9-5.4,2c-1.3,1.1-1.4,4.1-2.9,5c-1.5,0.9-4.1-0.6-5.7,0c-1.6,0.6-2.7,3.4-4.4,3.7c-1.7,0.3-3.6-1.9-5.4-1.9
                c-1.8,0-3.7,2.2-5.4,1.9c-1.7-0.3-2.8-3.1-4.4-3.7c-1.7-0.6-4.2,0.8-5.8,0c-1.5-0.9-1.6-3.8-2.9-5c-1.3-1.1-4.3-0.7-5.4-2
                c-1.1-1.3-0.2-4.1-1-5.7c-0.9-1.5-3.8-2.1-4.4-3.7c-0.6-1.6,1.3-3.9,1-5.7c-0.3-1.7-2.8-3.2-2.8-5c0-1.8,2.5-3.3,2.8-5
                c0.3-1.7-1.5-4-1-5.7c0.6-1.7,3.5-2.2,4.4-3.7c0.9-1.5-0.1-4.3,1-5.7c1.1-1.3,4.1-0.9,5.4-2c1.3-1.1,1.4-4.1,2.9-5
                c1.5-0.9,4.1,0.6,5.7,0c1.6-0.6,2.7-3.4,4.4-3.7c1.7-0.3,3.6,1.9,5.4,1.9c1.8,0,3.7-2.2,5.4-1.9c1.7,0.3,2.8,3.1,4.4,3.7
                c1.7,0.6,4.2-0.8,5.8,0c1.5,0.9,1.6,3.8,2.9,5c1.3,1.1,4.3,0.7,5.4,2c1.1,1.3,0.2,4.1,1,5.7c0.9,1.5,3.8,2.1,4.4,3.7
                c0.6,1.6-1.3,3.9-1,5.7C78.7,46.7,81.2,48.2,81.2,50z"
                      />
                    </g>
                    <g>
                      <rect
                        x="50.7"
                        y="33.5"
                        transform="matrix(0.659 0.7521 -0.7521 0.659 55.6719 -23.4983)"
                        class="st2"
                        width="6.1"
                        height="32.3"
                      />
                      <rect
                        x="36.7"
                        y="47"
                        transform="matrix(0.7521 -0.659 0.659 0.7521 -26.4924 39.8687)"
                        class="st2"
                        width="6.1"
                        height="16.3"
                      />
                    </g>
                  </svg>
                </a>
              </div>
              <div class="name">Active now</div>
            </div>

            <div class="options">
              <button class="info">
                <svg
                  width="25px"
                  height="25px"
                  version="1.1"
                  id="Layer_1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px"
                  y="0px"
                  viewBox="0 0 40 40"
                  style="enable-background: new 0 0 40 40"
                  xml:space="preserve"
                >
                  <style type="text/css">
                    .info0 {
                      fill: #ffffff;
                      stroke: #000000;
                      stroke-width: 2;
                      stroke-miterlimit: 10;
                    }

                    .info {
                      stroke: #000000;
                      stroke-width: 0.25;
                      stroke-miterlimit: 10;
                    }
                  </style>
                  <circle class="info0" cx="20" cy="20.7" r="16.4" />
                  <ellipse
                    class="info1"
                    cx="19.7"
                    cy="14.5"
                    rx="1.5"
                    ry="1.5"
                  />
                  <path
                    class="info1"
                    d="M19.9,28.7L19.9,28.7c-0.7,0-1.2-0.5-1.2-1.2V19c0-0.7,0.5-1.2,1.2-1.2l0,0c0.7,0,1.2,0.5,1.2,1.2v8.5
            C21.1,28.1,20.6,28.7,19.9,28.7z"
                  />
                  <path
                    class="info1"
                    d="M15.3,18.9L15.3,18.9c0-0.6,0.5-1.1,1.1-1.1H20c0.6,0,1.1,0.5,1.1,1.1l0,0c0,0.6-0.5,1.1-1.1,1.1h-3.6
            C15.8,20,15.3,19.5,15.3,18.9z"
                  />
                  <path
                    class="info1"
                    d="M16.6,27.8L16.6,27.8c0-0.6,0.5-1.1,1.1-1.1h4c0.6,0,1.1,0.5,1.1,1.1l0,0c0,0.6-0.5,1.1-1.1,1.1h-4
            C17.1,29,16.6,28.5,16.6,27.8z"
                  />
                </svg>
              </button>
            </div>
          </div>

          <div class="middle">
            <div class="tumbler">
              <div class="messages">
                <div class="clip sent">
                  <div class="text">hi</div>
                </div>

                <div class="clip received">
                  <div class="text">hello</div>
                </div>

                <div class="clip sent">
                  <div id="audio" style="margin: 20px 0"></div>
                </div>
              </div>

              <div class="seen">Seen</div>
            </div>
          </div>

          <div class="bottom">
            <div class="cup">
              <div class="picker" id="emoji">
                <svg
                  width="25px"
                  height="25px"
                  version="1.1"
                  id="Layer_1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px"
                  y="0px"
                  viewBox="0 0 100 100"
                  style="enable-background: new 0 0 100 100"
                  xml:space="preserve"
                >
                  <style type="text/css">
                    .ep0 {
                      fill: #ffffff;
                      stroke: #000000;
                      stroke-width: 5;
                      stroke-miterlimit: 10;
                    }

                    .ep1 {
                      stroke: #000000;
                      stroke-width: 5;
                      stroke-miterlimit: 10;
                    }
                  </style>
                  <g>
                    <ellipse class="ep0" cx="50" cy="50" rx="38.7" ry="38.7" />
                    <path
                      class="ep1"
                      d="M50,90c-22.2,0-40-18.1-40-40s17.8-40,40-40s40,18.1,40,40S72.2,90,50,90z M50,12.6
                                   c-20.6,0-37.5,16.8-37.5,37.4S29.4,87.4,50,87.4S87.5,70.6,87.5,50S70.6,12.6,50,12.6z"
                    />
                  </g>
                  <path
                    class="ep0"
                    d="M63.5,62.4c0,3.4-6.1,6.2-13.5,6.2s-13.5-2.8-13.5-6.2"
                  />
                  <ellipse class="ep1" cx="36.8" cy="45.9" rx="2.3" ry="2.3" />
                  <ellipse class="ep1" cx="62.2" cy="45.9" rx="2.3" ry="2.3" />
                </svg>
              </div>

              <textarea
                id="message"
                cols="30"
                rows="1"
                placeholder="Message..."
              ></textarea>
              <button class="send">Send</button>
              <div class="picker photo">
                <svg
                  width="25px"
                  height="25px"
                  version="1.1"
                  id="Layer_1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px"
                  y="0px"
                  viewBox="0 0 40 40"
                  style="enable-background: new 0 0 40 40"
                  xml:space="preserve"
                >
                  <style type="text/css">
                    .ip0 {
                      fill: #ffffff;
                      stroke: #000000;
                      stroke-width: 3;
                      stroke-miterlimit: 10;
                    }

                    .ip1 {
                      stroke: #000000;
                      stroke-miterlimit: 10;
                    }
                  </style>
                  <path
                    class="ip0"
                    d="M31.3,35.1H8.7c-2.9,0-5.2-2.3-5.2-5.2V10.1c0-2.9,2.3-5.2,5.2-5.2h22.6c2.9,0,5.2,2.3,5.2,5.2v19.8
                               C36.5,32.8,34.2,35.1,31.3,35.1z"
                  />
                  <polyline
                    class="ip0"
                    points="3.5,32.2 13.4,23.7 18,27.9 29.3,18.6 36.5,24.8 "
                  />
                  <ellipse class="ip1" cx="10.7" cy="12.3" rx="1.6" ry="1.5" />
                </svg>
              </div>

              <!-- <div class="picker photo">
                <svg
                  width="25px"
                  height="25px"
                  version="1.1"
                  id="Layer_1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px"
                  y="0px"
                  viewBox="0 0 100 100"
                  style="enable-background: new 0 0 100 100"
                  xml:space="preserve"
                >
                  <style type="text/css">
                    .ht0 {
                      fill: #ffffff;
                      stroke: #000000;
                      stroke-width: 8;
                      stroke-miterlimit: 10;
                    }
                  </style>
                  <path
                    class="ht0"
                    d="M84.7,21.2c-3.6-3.9-8.3-5.8-13.1-5.8c-4.7,0-9.3,1.9-12.9,5.6L50,30.1l-8.6-9.2c-3.6-3.9-8.3-5.8-13.1-5.8
                               c-4.6,0-9.3,1.9-12.9,5.6c-7.2,7.5-7.3,19.8-0.2,27.5l8.6,9.2L49.6,85l26.2-27.2l8.7-9.1C91.7,41.2,91.8,28.9,84.7,21.2z"
                  />
                </svg>
              </div> -->
              <i
                class="fa-solid fa-microphone"
                id="microphone"
                style="margin: 0 10px"
              ></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const textarea = document.getElementById("message");
        const send = document.querySelector(".send");
        const photo = document.querySelector(".photo");

        document.body.addEventListener("contextmenu", function (e) {
          if (e.target.classList.contains("blue-tick")) {
            e.preventDefault();
          }
        });

        photo.style.display = "block";
        send.style.display = "none";

        function toggleSendPhoto() {
          textarea.style.height = "0px";
          textarea.style.height = textarea.scrollHeight + "px";
          if (textarea.value.trim().length > 0) {
            send.style.display = "block";
            photo.style.display = "none";
          } else {
            send.style.display = "none";
            photo.style.display = "block";
          }
        }

        ["input", "keydown", "keyup"].forEach((event) => {
          textarea.addEventListener(event, toggleSendPhoto);
        });

        document.querySelectorAll(".person").forEach((person) => {
          person.addEventListener("click", () => {
            textarea.focus();
          });
        });

        function add() {
          const message = textarea.value;
          if (message.length > 0) {
            const messages = document.querySelector(".messages");
            const newMessage = document.createElement("div");
            newMessage.classList.add("clip", "sent");
            newMessage.innerHTML = `<div class='text'>${message}</div>`;
            messages.appendChild(newMessage);

            // const content = document.querySelector(".content");
            // content.innerHTML = `<div class='message'><b>You :</b> ${message}</div>`;

            // textarea.value = "";
            // send.style.display = "none";
            // photo.style.display = "block";
            // textarea.focus();
            // textarea.style.height = "";
            console.log("asdasd");

            document.getElementById("message").value = "";
          }
          console.log("11121221 asdasd");
        }

        send.addEventListener("click", add).then(() => {
          console.log("send button clicked");
          document.getElementById("message").value = "";
        });

        textarea.addEventListener("keydown", (event) => {
          console.log("add");
          if (event.keyCode == 13 && !event.shiftKey) {
            if (textarea.value.trim().length > 0) {
              // add();
              document.getElementById("message").value = "";
            }
            event.preventDefault();
          }
        });
      });
    </script>

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/emojionearea/3.4.2/emojionearea.min.js"></script>

    <script type="text/javascript">
      const mic = document.querySelector("#microphone");

      mic.addEventListener("click", function () {
        var device = navigator.mediaDevices.getUserMedia({ audio: true });
        var items = [];
        device.then((stream) => {
          var recorder = new MediaRecorder(stream);
          recorder.ondataavailable = (e) => {
            items.push(e.data);
            if (recorder.state == "inactive") {
              var blob = new Blob(items, { type: "audio/webm" });
              var audio = document.getElementById("audio");
              var mainaudio = document.createElement("audio");
              mainaudio.style.margin = "10px 0";
              mainaudio.setAttribute("controls", "controls");
              audio.appendChild(mainaudio);
              mainaudio.innerHTML = `<source src="'+URL.createObjectURL(blob)+'"
                type="video.webm"/>`;
            }
          };
          recorder.start(100);
          setTimeout(() => {
            recorder.stop();
          }, 5000);
        });
      });
    </script>

    //
    <script type="text/javascript">
      //   const Emoji = document.querySelector("#emoji");

      //   Emoji.addEventListener("click", function () {});
      //   $("#message").emojioneArea({
      //     pickerPosition: "bottom",
      //   });
      //
    </script>

    <% include ./partials/footer.ejs %>
  </body>
</html>
